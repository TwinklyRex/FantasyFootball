"0","library(fplscrapR)"
"0","library(dplyr)"
"0","library(formattable)"
"0","#we fetch my player selection picks for the next gameweek"
"0","picks <- get_entry_picks(entryid=846352,gw=21)$picks"
"0",""
"0",""
"0","# fetch the Official FPL Expected Points projections "
"0","df <- get_player_info() %>%"
"0","  select(id,playername,ep_next) %>%"
"0","  mutate(""element""=id)"
"0",""
"0","#indicate expected points projection is a numeric vector"
"0","df$ep_next <- as.numeric(df$ep_next)"
"0",""
"0","#"
"0","df2 <- left_join(picks,df,by=""element"") %>% select(playername,is_captain,is_vice_captain,ep_next)"
"0",""
"0",""
"0","#rename table columns"
"0","colnames(df2) = c(""Player Name"", ""Captain"", ""Vice Captain"", ""Expected Points"")"
"0",""
"0",""
"0","#Add up all the expected points of the players I have picked for gameweek 21"
"0","ep <- sum(df2$ep_next[1:11])"
"0",""
"0","#Create new row to display total expected points"
"0","new_row <- c("""", """", """", ep)  "
"0",""
"0","#bind new row to table"
"0","ep_table <- rbind(df2, new_row)"
"0",""
"0","#Colour code EP to show whether they are good or bad"
"0","improvement_formatter <- formatter(""span"", "
"0","                                style = x ~ style("
"0","                                  font.weight = ""bold"", "
"0","                                  color = ifelse(x > 4, customGreen, ifelse(x < 4, customRed, ""black""))), "
"0","                                   x ~ icontext(ifelse(x>0, ""arrow-up"", ""arrow-down""), x)"
"0","                                   )"
"0","#format table"
"0","formattable(ep_table, align = c(""l"", rep(""r"", NCOL(ep) - 1)), `Expected Points` = improvement_formatter)"
